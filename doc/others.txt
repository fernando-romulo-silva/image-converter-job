
Batch work with one file

1) move file folder

2) split files - "split -a 5 -l 4 #{jobParameters['inputFile']} #{jobParameters['stagingDirectory']}"

https://stackoverflow.com/questions/43500034/trying-to-split-files-using-systemcommandtasklet-execution-of-system-command-d


3) load files
   -> check image size
   -> check file name (must be unique)


4) send msg convert

5) update status

6) records problem

6) move files




You can calculate the file size (in bytes) using below formula:

x = (n * (3/4)) - y
Where:

1. x is the size of a file in bytes

2. n is the length of the Base64 String

3. y will be 2 if Base64 ends with '==' and 1 if Base64 ends with '='.



------------------------------------------------------------------------------------------------------------

Link

https://spring.io/blog/2021/01/27/spring-batch-on-kubernetes-efficient-batch-processing-at-scale

https://docs.spring.io/spring-batch/docs/current/reference/html/spring-batch-integration.html#springBatchIntegration

https://github.com/dbalthassat/spring-batch-poc/blob/master/src/main/java/org/dbalthassat/FileMovingTasklet.java

https://stackoverflow.com/questions/49636717/how-to-pass-arguments-to-a-job-resource-in-kubernetes

